{% extends 'base.html' %}

{% block title %}{{ date|date:"M d, Y" }} - Budget Tracker{% endblock %}

{% block content %}
<div class="container">
    <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <a href="{% url 'history' %}" style="color: #667eea; text-decoration: none; font-size: 14px;">← Back to History</a>
    </div>

    <div class="total-display">
        <div class="total-label">{{ date|date:"l, F d, Y" }}</div>
        <div class="total-amount">${{ daily_total|floatformat:2 }}</div>
    </div>

    {% if category_summary %}
    <div class="card">
        <h3 style="margin-bottom: 15px; font-size: 18px;">By Category</h3>
        {% for cat in category_summary %}
        <div class="expense-item">
            <div class="expense-info">
                <div class="expense-category">{{ cat.category_display }}</div>
                <div class="expense-description">{{ cat.count }} transaction{{ cat.count|pluralize }}</div>
            </div>
            <div class="expense-amount">${{ cat.total|floatformat:2 }}</div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="card">
        <h3 style="margin-bottom: 15px; font-size: 18px;">All Transactions</h3>
        {% for expense in expenses %}
        <div class="expense-item">
            <div class="expense-info">
                <div class="expense-category">{{ expense.get_category_display }}</div>
                {% if expense.description %}
                <div class="expense-description">{{ expense.description }}</div>
                {% endif %}
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <div class="expense-amount">${{ expense.amount|floatformat:2 }}</div>
                <a href="{% url 'expense_edit' expense.pk %}" style="color: #667eea; text-decoration: none; font-size: 14px;">✏️</a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}